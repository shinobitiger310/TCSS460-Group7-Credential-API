# Add these endpoints under the Admin section in your swagger.yaml
  
  /admin/users/{id}:
    get:
      tags:
        - Admin
      summary: Get user details by ID
      description: |
        Admin endpoint to retrieve detailed information about a specific user.
        
        **Requirements:**
        - Requires Admin role (3+)
        - Returns comprehensive user information including verification status and account history
      operationId: getUserById
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: User ID
          example: 42
      responses:
        '200':
          description: User details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User details retrieved successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/ServerError'
    
    put:
      tags:
        - Admin
      summary: Update user information
      description: |
        Admin endpoint to update user information.
        
        **Requirements:**
        - Requires Admin role (3+)
        - Cannot update users with equal or higher role
        - Cannot change user's role through this endpoint (use PUT /admin/users/:id/role)
        
        **Updatable Fields:**
        - First name
        - Last name
        - Username (must remain unique)
        - Email (must remain unique, will require re-verification)
        - Phone number
        - Account status (pending, active, suspended, locked)
      operationId: updateUser
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: User ID
          example: 42
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                firstname:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: Jane
                lastname:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: Smith
                username:
                  type: string
                  minLength: 3
                  maxLength: 50
                  pattern: '^[a-zA-Z0-9_-]+$'
                  example: janesmith
                email:
                  type: string
                  format: email
                  example: jane.smith@example.com
                phone:
                  type: string
                  pattern: '^\d{10,}$'
                  example: "2065551234"
                account_status:
                  type: string
                  enum: [pending, active, suspended, locked]
                  example: active
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User updated successfully
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: Forbidden - Cannot modify user with equal/higher role
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Cannot modify user with equal or higher role
        '404':
          $ref: '#/components/responses/NotFoundError'
        '409':
          description: Conflict - Username or email already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Username or email already exists
        '500':
          $ref: '#/components/responses/ServerError'
    
    delete:
      tags:
        - Admin
      summary: Soft delete user
      description: |
        Admin endpoint to soft delete a user (marks account as deleted, data retained).
        
        **Requirements:**
        - Requires Admin role (3+)
        - Cannot delete users with equal or higher role
        - Cannot delete yourself
        
        **Behavior:**
        - Sets account_status to 'deleted'
        - User cannot log in
        - Data is retained for audit purposes
        - User can potentially be restored by higher-level admin
      operationId: deleteUser
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: User ID
          example: 42
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: User deleted successfully
                  data:
                    type: object
                    properties:
                      userId:
                        type: integer
                        example: 42
                      deletedAt:
                        type: string
                        format: date-time
                        example: "2025-10-30T20:30:00.000Z"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: Forbidden - Cannot delete user with equal/higher role or yourself
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Cannot delete user with equal or higher role
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/ServerError'

  /admin/users/{id}/password:
    put:
      tags:
        - Admin
      summary: Admin password reset
      description: |
        Admin endpoint to reset a user's password without requiring the old password.
        
        **Requirements:**
        - Requires Admin role (3+)
        - Cannot reset password for users with equal or higher role
        - Cannot reset your own password (use regular password change endpoint)
        
        **Security:**
        - New password must meet all password requirements
        - User's session tokens are invalidated (forced re-login)
        - Password reset is logged for audit purposes
      operationId: adminPasswordReset
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: User ID
          example: 42
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  format: password
                  minLength: 8
                  maxLength: 128
                  description: New password for the user
                  example: NewSecurePass456!
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Password reset successfully
                  data:
                    type: object
                    properties:
                      userId:
                        type: integer
                        example: 42
                      resetAt:
                        type: string
                        format: date-time
                        example: "2025-10-30T20:30:00.000Z"
                      resetBy:
                        type: integer
                        description: Admin user ID who performed the reset
                        example: 5
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: Forbidden - Cannot reset password for user with equal/higher role or yourself
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: Cannot reset password for user with equal or higher role
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/ServerError'
